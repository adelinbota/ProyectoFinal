<body>
  <div class="container">
    <h1 class="col-12 text-center mt-5">Horario</h1>
    <div class="service-selector">
      <select id="service" class="form-select col-1">
        <option *ngFor="let tiposServicio of tiposServicioConMayuscula" value="{{tiposServicio.idTipoServicio}}">
          {{tiposServicio.nombre}}</option>
      </select>
    </div>

    <div class="navigation-buttons">
      <button class="btn btn-secondary" (click)="anterior()">
        <<</button>
          <button class="btn btn-secondary" (click)="siguiente()">>></button>
    </div>

    <table class="mb-5">
      <thead>
        <tr>
          <th>Hora</th>
          <th *ngFor="let semana of semanas" [ngClass]="{ 'disabled': fechaAnterior(semana) }">{{ semana }}</th>
        </tr>
      </thead>
      <ng-container *ngFor="let hora of horas">
        <tr>
          <td>{{ hora }}</td>
          <td (click)="abrirModal(contenido, semana, hora)" *ngFor="let semana of semanas"></td>
        </tr>
      </ng-container>
      <ng-template #contenido let-modal>
        <div class="card">
          <div class="card-header">
            Añade una cita
          </div>
          <div class="card-body">
            <div class="mb-3">
              <form (ngSubmit)="addDatos()">
                <div class="col-12">
                  <div class="row">
                    <div class="text-center">
                      <h4>{{fechaSeleccionada}}/{{anio}}</h4><h4>{{horaSeleccionada}}</h4>
                    </div>
                    <div class="col-6 mt-3">
                      <label for="password" class="form-label">Usuario:</label>
                      <select class="form-select" aria-label="Default select example" name="selectUsuario"
                        [(ngModel)]="idUsuario">
                        <option value="">-- Seleccione un usuario --</option>
                        <option *ngFor="let usuario of usuarios" value="{{usuario.idUsuario}}">{{usuario.nombre}}
                        </option>
                      </select>
                    </div>
                    <div class="col-6 mt-3">
                      <label for="select" class="form-label">Tipo servicio:</label>
                      <select class="form-select" aria-label="Default select example" name="selectServicios"
                        [(ngModel)]="idServicio">
                        <option *ngFor="let servicio of servicios" value="{{servicio.idServicio}}">{{servicio.nombre}}
                        </option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="row">
                    <div class="mt-3">
                      <label for="comentarios" class="form-label">Otros datos:</label>
                      <textarea type="text" name="comentarios" id="comentarios" class="form-control"
                        [(ngModel)]="comentarios" aria-describedby="helpId"></textarea>
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="row">
                    <button type="button" (click)="modal.dismiss()" class="btn btn-outline-primary mt-4 col-3">Atrás</button>
                    <div class="col-6"></div>
                    <button type="submit" class="btn btn-outline-success mt-4 col-3">Agregar</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </ng-template>
    </table>
  </div>
</body>